function e(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var n=!1,t={false:"push",true:"unshift",after:"push",before:"unshift"},r={isPermalinkSymbol:!0};function a(e,a,i,l){var o;if(!n){var c="Using deprecated markdown-it-anchor permalink option, see https://github.com/valeriangalliat/markdown-it-anchor#todo-anchor-or-file";process&&process.emitWarning?process.emitWarning(c):console.warn(c),n=!0}var s=[Object.assign(new i.Token("link_open","a",1),{attrs:[].concat(a.permalinkClass?[["class",a.permalinkClass]]:[],[["href",a.permalinkHref(e,i)]],Object.entries(a.permalinkAttrs(e,i)))}),Object.assign(new i.Token("html_block","",0),{content:a.permalinkSymbol,meta:r}),new i.Token("link_close","a",-1)];a.permalinkSpace&&i.tokens[l+1].children[t[a.permalinkBefore]](Object.assign(new i.Token("text","",0),{content:" "})),(o=i.tokens[l+1].children)[t[a.permalinkBefore]].apply(o,s)}function i(e){return"#"+e}function l(e){return{}}var o={class:"header-anchor",symbol:"#",renderHref:i,renderAttrs:l};function c(e){function n(t){return t=Object.assign({},n.defaults,t),function(n,r,a,i){return e(n,t,r,a,i)}}return n.defaults=Object.assign({},o),n}var s=c(function(e,n,a,i,l){var o,c=[Object.assign(new i.Token("link_open","a",1),{attrs:[].concat(n.class?[["class",n.class]]:[],[["href",n.renderHref(e,i)],["aria-hidden","true"]],Object.entries(n.renderAttrs(e,i)))}),Object.assign(new i.Token("html_inline","",0),{content:n.symbol,meta:r}),new i.Token("link_close","a",-1)];n.space&&i.tokens[l+1].children[t[n.placement]](Object.assign(new i.Token("text","",0),{content:" "})),(o=i.tokens[l+1].children)[t[n.placement]].apply(o,c)});Object.assign(s.defaults,{space:!0,placement:"after"});var u=c(function(e,n,t,r,a){var i=[Object.assign(new r.Token("link_open","a",1),{attrs:[].concat(n.class?[["class",n.class]]:[],[["href",n.renderHref(e,r)]],Object.entries(n.renderAttrs(e,r)))})].concat(r.tokens[a+1].children,[new r.Token("link_close","a",-1)]);r.tokens[a+1]=Object.assign(new r.Token("inline","",0),{children:i})}),d=c(function(e,n,a,i,l){var o;if(!["visually-hidden","aria-label","aria-describedby","aria-labelledby"].includes(n.style))throw new Error("`permalink.linkAfterHeader` called with unknown style option `"+n.style+"`");if(!["aria-describedby","aria-labelledby"].includes(n.style)&&!n.assistiveText)throw new Error("`permalink.linkAfterHeader` called without the `assistiveText` option in `"+n.style+"` style");if("visually-hidden"===n.style&&!n.visuallyHiddenClass)throw new Error("`permalink.linkAfterHeader` called without the `visuallyHiddenClass` option in `visually-hidden` style");var c=i.tokens[l+1].children.filter(function(e){return"text"===e.type||"code_inline"===e.type}).reduce(function(e,n){return e+n.content},""),s=[],u=[];n.class&&u.push(["class",n.class]),u.push(["href",n.renderHref(e,i)]),u.push.apply(u,Object.entries(n.renderAttrs(e,i))),"visually-hidden"===n.style?(s.push(Object.assign(new i.Token("span_open","span",1),{attrs:[["class",n.visuallyHiddenClass]]}),Object.assign(new i.Token("text","",0),{content:n.assistiveText(c)}),new i.Token("span_close","span",-1)),n.space&&s[t[n.placement]](Object.assign(new i.Token("text","",0),{content:" "})),s[t[n.placement]](Object.assign(new i.Token("span_open","span",1),{attrs:[["aria-hidden","true"]]}),Object.assign(new i.Token("html_inline","",0),{content:n.symbol,meta:r}),new i.Token("span_close","span",-1))):s.push(Object.assign(new i.Token("html_inline","",0),{content:n.symbol,meta:r})),"aria-label"===n.style?u.push(["aria-label",n.assistiveText(c)]):["aria-describedby","aria-labelledby"].includes(n.style)&&u.push([n.style,e]);var d=[Object.assign(new i.Token("link_open","a",1),{attrs:u})].concat(s,[new i.Token("link_close","a",-1)]);(o=i.tokens).splice.apply(o,[l+3,0].concat(d))});function f(e,n,t,r){var a=e,i=r;if(t&&Object.prototype.hasOwnProperty.call(n,a))throw new Error("User defined `id` attribute `"+e+"` is not unique. Please fix it in your Markdown to continue.");for(;Object.prototype.hasOwnProperty.call(n,a);)a=e+"-"+i,i+=1;return n[a]=!0,a}function b(n,t){t=Object.assign({},b.defaults,t),n.core.ruler.push("anchor",function(n){for(var r,i,l={},o=n.tokens,c=Array.isArray(t.level)?(r=t.level,function(e){return r.includes(e)}):function(e){return function(n){return n>=e}}(t.level),s=function(n){var t=0;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(n=function(n,t){if(n){if("string"==typeof n)return e(n,void 0);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(n,void 0):void 0}}(n)))return function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=n[Symbol.iterator]()).next.bind(t)}(o);!(i=s()).done;){var u=i.value;if("heading_open"===u.type&&c(Number(u.tag.substr(1)))){var d=o.indexOf(u),b=o[d+1].children.filter(function(e){return"text"===e.type||"code_inline"===e.type}).reduce(function(e,n){return e+n.content},""),p=u.attrGet("id");p=null==p?f(t.slugify(b),l,!1,t.uniqueSlugStartIndex):f(p,l,!0,t.uniqueSlugStartIndex),u.attrSet("id",p),!1!==t.tabIndex&&u.attrSet("tabindex",""+t.tabIndex),"function"==typeof t.permalink?t.permalink(p,t,n,d):(t.permalink||t.renderPermalink&&t.renderPermalink!==a)&&t.renderPermalink(p,t,n,d),t.callback&&t.callback(u,{slug:p,title:b})}}})}Object.assign(d.defaults,{style:"visually-hidden",space:!0,placement:"after"}),b.permalink={__proto__:null,legacy:a,renderHref:i,renderAttrs:l,makePermalink:c,ariaHidden:s,headerLink:u,linkAfterHeader:d},b.defaults={level:1,slugify:function(e){return encodeURIComponent(String(e).trim().toLowerCase().replace(/\s+/g,"-"))},uniqueSlugStartIndex:1,tabIndex:"-1",permalink:!1,renderPermalink:a,permalinkClass:s.defaults.class,permalinkSpace:s.defaults.space,permalinkSymbol:"Â¶",permalinkBefore:"before"===s.defaults.placement,permalinkHref:s.defaults.renderHref,permalinkAttrs:s.defaults.renderAttrs},module.exports=b;
//# sourceMappingURL=markdownItAnchor.js.map
