"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.resolveThemeApi = void 0;
const resolvePluginsFromConfig_1 = require("./resolvePluginsFromConfig");
const resolveTheme_1 = require("./resolveTheme");
const resolveThemeLayouts_1 = require("./resolveThemeLayouts");
/**
 * Recursively resolve plugins and layouts of theme and its parent theme
 */
const resolveThemeApi = (app, themeName) => {
    const theme = resolveTheme_1.resolveTheme(app, themeName);
    const themeLayouts = resolveThemeLayouts_1.resolveThemeLayouts(theme.layouts);
    const themePlugins = resolvePluginsFromConfig_1.resolvePluginsFromConfig(app, theme.plugins);
    if (!theme.extends) {
        return {
            layouts: themeLayouts,
            plugins: [theme, ...themePlugins],
        };
    }
    const parentThemeApi = exports.resolveThemeApi(app, theme.extends);
    return {
        layouts: {
            ...parentThemeApi.layouts,
            ...themeLayouts,
        },
        plugins: [...parentThemeApi.plugins, theme, ...themePlugins],
    };
};
exports.resolveThemeApi = resolveThemeApi;
